%% ------------------------------------------------------------------------- %%
\chapter{Introdução}
\label{cap:introducao}
Em infraestruturas de nuvem, recursos computacionais são controlados pelo fornecedor e alocados a qualquer momento de acordo com a necessidade do consumidor \cite{goncalvesresource}. 
Para obter essa funcionalidade de alocar recursos a qualquer momento, normalmente, a nuvem adota uma tecnologia chamada virtualização.

A virtualização divide um recurso com grande capacidade de processamento em recursos menores chamados de máquinas virtuais \cite{barham2003xen}.
Com recursos menores, é possível fornecer ao consumidor uma quantidade menor de recursos computacionais que ainda satisfaçam seus requisitos e também alocar mais sob demanda \cite{armbrust2009above}.
Por exemplo, uma empresa de comércio eletrônico pode alugar uma quantidade $x$ de processadores de uma máquina física na véspera do natal, afim de garantir que todos os clientes terão sucesso nas compras, e reduzir esse aluguel para $x/16$ após a data festiva, já que a quantidade esperada de acessos tende a cair.
Apesar das máquinas virtuais ajudarem a aumentar a flexibilidade, elas ainda têm um desempenho abaixo da máquina pura quando executamos aplicações que usam muito a rede
 \cite{chaudhary2008comparison} \cite{ekanayake2010high} \cite{liu2010evaluating} \cite{Waldspurger:2012:IV:2063176.2063194} \cite{Rixner:2008:NVB:1348583.1348592}. 

Uma das principais causas é o \textit{hypervisor}, um módulo necessário para a gerência das máquinas virtuais, e sua arquitetura de virtualização de rede. 
Diferentemente da arquitetura de rede padrão, há alguns passos adicionais para transmitir e receber um pacote de informação que implicam em um custo adicional tanto na memória como no processamento \cite{chaudhary2008comparison} \cite{ekanayake2010high} \cite{liu2010evaluating} \cite{Waldspurger:2012:IV:2063176.2063194} \cite{Rixner:2008:NVB:1348583.1348592}.


\sout{Para reduzir o custo do processamento, uma proposta é usar uma estratégia para gerenciar a agregação de interrupções.
A agregação de interrupções faz o \textit{driver} da placa de rede não gerar interrupções no sistema quando um pacote é recebido ou é transmitido com sucesso.
Ao invés disso, uma interrupção é gerada depois de um intervalo de tempo que um pacote é recebido ou transmitido ou é gerada quando uma quantidade de pacotes é transmitida/recebida.	
Essa pesquisa foca em propor algoritmos que automatizem a configuração de agregação de interrupções realizada pelo \textit{hypervisor}, tentando ajustar esse parâmetro dinamicamente de forma a garantir os requisitos de Qualidade de Serviço (\textit{QoS}) de aplicações em nuvem que façam uso intensivo dos enlaces de rede.
}

\uline{
Para reduzir o custo do processamento, uma proposta é usar uma estratégia para gerenciar a agregação de interrupções \cite{salah2007coalesce}, \cite{dong2011optimizing}.
Na agregação de interrupções, o \textit{driver} da placa de rede não gera interrupções no sistema quando um pacote é recebido ou é transmitido com sucesso.
}\uline{
Ao invés disso, uma interrupção é gerada depois de um intervalo de tempo que um pacote é recebido ou transmitido ou é gerada quando uma quantidade de pacotes é transmitida/recebida, reduzindo então, a quantidade de interrupções por pacote. 
}
\uline{
As interrupções têm prioridade em serem realizadas pelo sistema em relação a outras tarefas.
Considerando os dispositivos de E/S, as redes gigabits transferem com um taxa 10x maior que os discos rígidos e 1000x maior que os disquetes como é possível ver na Figura \ref{taxa} \cite{stallings1986computer}.
}
\begin{figure}[h!]
\begin{center}
  \includegraphics[width=288pt,height=222pt]{./img/taxa.png}
\caption{taxa de transferência para diferentes dispositivos de E/S \cite{stallings1986computer}}
\label{taxa}
\end{center}
\end{figure}

\uline{
 Quando o sistema é sobrecarregado de interrupções, este gasta todo seu tempo tentando resolvê-la, impossibilitando que outras tarefas sejam executadas. Essa situação é chamada de ``\textit{livelock}'' \cite{salah2007coalesce}.
Na recepção de pacotes pode ocorrer um \textit{livelock} quando a transferência de pacotes é em torno de gigabits e
vários pacotes são recebidos enquanto um outro ainda está sendo processado. Nesse cenário, o sistema passa a ter que manipular cada uma das interrupções geradas pelos pacotes que chegam e nunca consegue processar um pacote ou então começa a descartar pacotes.
}

\uline{Essa pesquisa foca em propor algoritmos que automatizem a configuração de agregação de interrupções realizada pelo \textit{hypervisor}.
Esses algoritmos tentam ajustar os parâmetro de agregação de interrupções dinamicamente de forma a garantir os requisitos de Qualidade de Serviço (\textit{QoS}) de aplicações em nuvem que façam uso intensivo dos enlaces de rede.
}

%% ------------------------------------------------------------------------- %%
\section{Objetivos}
\label{sec:objetivo}
\sout{O objetivo dessa pesquisa é demostrar que os algoritmos de agregação de interrupções reduzem o uso da \textit{CPU} por pacote na transmissão e recepção e mantém a latência consideravelmente baixa, dentro dos requisitos das aplicações.
}
\uline{
O objetivo dessa pesquisa é demostrar que os algoritmos de agregação de interrupções propostos reduzem o uso da \textit{CPU} por pacote na transmissão e recepção e mantém a latência consideravelmente baixa, dentro dos requisitos das aplicações.
}
%% ------------------------------------------------------------------------- %%
\section{Contribuições}
\label{sec:contribucoes}

As principais contribuições desse trabalho são:

\begin{itemize}
  \item 
   Fornecer um algoritmo capaz de garantir uma melhor utilização dos recursos de processamento e de comunicação na infraestrutura de nuvem para aplicações que façam uso intenso da rede.
  \item 
   Automatizar as configurações de agregação de interrupções do \textit{hypervisor} de acordo com a transmissão e recepção de pacotes.
  \item
    Desenvolver um módulo para simulações de nuvens que dê suporte a avaliação de desempenho de diferentes algoritmos de agregação de interrupções da placa de rede.
\end{itemize}

%% ------------------------------------------------------------------------- %%
\section{Organização do Trabalho}
\label{sec:organizacao_trabalho}

Este texto está organizado da seguinte forma: no Capítulo~\ref{cap:conceitos}, são apresentados os conceitos de virtualização de servidores, virtualização de E/S, virtualização de rede, agregação de interrupções e computação em nuvem.
No Capítulo~\ref{cap:revisao_bibliografica} é apresentada uma revisão bibliográfica na área de virtualização de rede.
Finalmente, no Capítulo~\ref{cap:proposta} é apresentada a proposta de um algoritmo para a agregação das interrupções da placa de rede, de um mecanismo para automatização dos parâmetros do algoritmo e de um módulo para simulação de transferência de dados entre máquinas virtuais em nuvens que permite estudos relacionados com a gerência de interrupções das placas de rede.


